var async = require('async');

module.exports = function(app){
  var mongo = app.dataSources.mongoDB;
  var trivQuestions = app.models.TriviaQuestions;

  mongo.autoupdate('TriviaQuestions', function(err){
    if(err) throw err;

    var questions = [
      {
        category: 'Computer Science',
        question: 'A good specification should be?',
        choices: [
           'unambiguous',
           'functional',
           'distincly specific',
           'all of these'
        ],
        answer: 'all of these',
	      id: '7873jld1'
      },
      {
        category: 'Computer Science',
        question: 'In object oriented software design, which of the following is not true?',
        choices: [
          'objects inherit the properties of the class',
          'classes are defined based on the attributes of the object',
          'objects can belong to two classes',
          'classes are always different'
        ],
        answer: 'objects can belong to two classes',
	      id: '7873jld2'
      },
            {
        category: 'Computer Science',
        question: 'Baud means?',
        choices: [
          'The number of bits transmitted per unit time',
          'The number of byted transmitted per unit time',
          'The rate at which the signal changes',
          'None of the above'
        ],
        answer: 'The rate at which the signal changes',
        id: '7873jld3'
      },
      {
        category: 'Computer Science',
        question: 'The topology with highest reliability is?',
        choices: [
          'Bus topology',
          'Star topology',
          'Ring topology',
          'Mesh topology'
        ],
        answer: 'Mesh topology',
        id: '7873jld4'
      },
      {
        category: 'Computer Science',
        question: 'In OSI model dialogue control and token management are responsibilities of ?',
        choices: [
          'Session Layer',
          'Network Layer',
          'Transport Layer',
          'Data-Link Layer'
        ],
        answer: 'Session Layer',
        id: '7873jld5'
      },
      {
        category: 'Computer Science',
        question: 'How long is an IPv6 address?',
        choices: [
          '32 bits',
          '128 bits',
          '128 bytes',
          '64 bits'
        ],
        answer: '128 bits',
        id: '7873jld6'
      },
      {
        category: 'Computer Science',
        question: 'Javascript was invented by _____.',
        choices: [
          'W3 group',
          'James Gosling',
          'Brendan Eich',
          'Bjarne Stroustrup'
        ],
        answer: 'Brendan Eich',
        id: '7873jld7',
      },
      {
        category: 'Computer Science',
        question: 'Javascript was originally developed under the name ____.',
        choices: [
          'ActionScript',
          'Oak',
          'Sencha',
          'Mocha'
        ],
        answer: 'ActionScript',
        id: '7873jld8'
      },
      {
        category: 'Computer Science',
        question: 'The first web browser was created by _____.',
        choices: [
          'Tim Berners-Lee',
          'Mozilla Foundation',
          'Marc Andreessen',
          'Ian Jacobs'
        ],
        answer: 'Tim Berners-Lee',
        id: '7873jld9'
      },
      {
        category: 'Computer Science',
        question: 'In Javascript, the \'+=\' operator can operate on which data type?',
        choices: [
          'String',
          'Integer',
          'All Options',
          'Float'
        ],
        answer: 'All Options',
        id: '7873jld10'
      },
      {
        category: 'Computer Science',
        question: 'Which is the in-house library of Yahoo!?',
        choices: [
          'Dojo',
          'YUI',
          'Prototype',
          'Closure'
        ],
        answer: 'YUI',
        id: '7873jld11'
      },
      {
        category: 'Computer Science',
        question: 'What are the events generated by the Node objects called?',
        choices: [
          'generators',
          'emitters',
          'dispatchers',
          'highevents'
        ],
        answer: 'emitters',
        id: '7873jld12'
      },
      {
        category: 'Computer Science',
        question: 'What is the purpose of the event handlers in the JavaScript?',
        choices: [
          'Adds innerHTML page to the code',
          'Performs handling of exceptions and occurences',
          'Allows JavaScript code to alter the behaviour of windows',
          'None of the above'
        ],
        answer: 'Allows JavaScript code to alter the behaviour of windows',
        id: '7873jld13'
      },
      {
        category: 'Computer Science',
        question: 'The setTimeout() method is used to _____.',
        choices: [
          'Make the event sleep',
          'Register a function to be invoked after a certain time',
          'Invoke an event after a certain time',
          'Time for iteration',
        ],
        answer: 'Register a function to be invoked after a certain time',
        id: '7873jld14',
      },
      {
        category: 'Computer Science',
        question: 'How to pick a document element based on the value of its id attribute?',
        choices: [
          'getElementsbyId()',
          'getElementbyId()',
          'Both a and b',
          'None of the above'
        ],
        answer: 'getElementbyId()',
        id: '7873jld15'
      },
      {
        category: 'Computer Science',
        question: 'Which Window object method is used to display message in a dialog box?',
        choices: [
          'alert()',
          'prompt()',
          'message()',
          'None of the above'
        ],
        answer: 'alert()',
        id: '7873jld16'
      },
      {
        category: 'Computer Science',
        question: 'Which of the following is a utility function in jQuery?',
        choices: [
          'jQuery.each()',
          'jQuery.parseJSON()',
          'jQuery.noConflict()',
          'None of the above'
        ],
        answer: 'jQuery.noConflict()',
        id: '7873jld17'
      },
      {
        category: 'Computer Science',
        question: 'Which property is used to obtain browser vendor and version information?',
        choices: [
          'modal',
          'version',
          'browser',
          'navigator'
        ],
        answer: 'navigator',
        id: '7873jld18'
      },
      {
        category: 'Computer Science',
        question: 'To which object does the location property belong?',
        choices: [
          'Window',
          'Position',
          'Element',
          'Location'
        ],
        answer: 'Window',
        id: '7873jld19'
      },
      {
        category: 'Computer Science',
        question: 'How do you find the number with the highest value of x and y?',
        choices: [
          'ceil(x,y)',
          'top(x,y)',
          'Math.ceil(x,y)',
          'Math.max(x,y)'
        ],
        answer: 'Math.max(x,y)',
        id: '7873jld20'
      },
      {
        category: 'Computer Science',
        question: 'What is the main difference between localStorage and sessionStorage?',
        choices: [
          'Lifetime',
          'Scope',
          'Both a and b',
          'None of the above'
        ],
        answer: 'Both a and b',
        id: '7873jld21'
      },
      {
        category: 'Computer Science',
        question: 'Which is the function used to retrieve a value?',
        choices: [
          'get()',
          'retrieve',
          'getItem()',
          'retrieveItem'
        ],
        answer: 'getItem()',
        id: '7873jld22'
      },
      {
        category: 'Computer Science',
        question: 'Which of the following is a stateless protocol?',
        choices: [
          'HTML',
          'XHTML',
          'HTTP',
          'all of the above'
        ],
        answer: 'HTTP',
        id: '7873jld23'
      },
      {
        category: 'Computer Science',
        question: 'JavaScript is ideal to',
        choices: [
          'make computations in HTML simpler',
          'minimize storage requirements on the web server',
          'increase the download time for the client',
          'None of the mentioned'
        ],
        answer: 'minimize storage requirements on the web server',
        id: '7873jld24'
      },
      {
        category: 'Computer Science',
        question: 'A proper scripting language is a',
        choices: [
          'High level programming language',
          'Assembly level programming language',
          'Machine level programming language',
          'Low level programming language'
        ],
        answer: 'High level programming language',
        id: '7873jld25'
      },
      {
        category: 'Computer Science',
        question: 'The ‘$’ present in the RegExp object is called a',
        choices: [
          'character',
          'matcher',
          'metacharacter',
          'metadata'
        ],
        answer: 'metacharacter',
        id: '7873jld26'
      }
    ];

    function findExistingQuestions(el, i, arr){
      trivQuestions.exists(el.id, function(err, exists){
        if(err) throw err;
        if(!exists){
          console.log(el);
        }
      });
    }

    questions.map(findExistingQuestions);

    async.map(questions, function(question, cb){
      trivQuestions.findOrCreate({where: {"id": question.id}}, question, function(err, questions){
        if(err) throw err;
      });
    });
  });
};
